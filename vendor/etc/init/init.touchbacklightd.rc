# Copyright (C) 2017, 2018 Sony Mobile Communications Inc.
#
# touchbacklightd configuration
#

on property:init.svc.illumination=running
    start touchbacklightd

on property:init.svc.illumination=stopped
    stop touchbacklightd

on property:sys.backlight_on=0 && property:sys.touch_id=3
    write /sys/devices/virtual/input/clearpad/force_sleep 2
on property:sys.backlight_on=0 && property:sys.touch_id=4
    write /sys/devices/virtual/input/clearpad/force_sleep 2

on property:sys.backlight_on=1 && property:sys.touch_id=3
    write /sys/devices/virtual/input/clearpad/force_sleep 0
on property:sys.backlight_on=1 && property:sys.touch_id=4
    write /sys/devices/virtual/input/clearpad/force_sleep 0

on property:sys.backlight_on=0 && property:sys.touch_id=7
    write /sys/bus/platform/devices/synaptics_tcm.0/synaptics_tcm/irq_en 0
on property:sys.backlight_on=0 && property:sys.touch_id=8
    write /sys/bus/platform/devices/synaptics_tcm.0/synaptics_tcm/irq_en 0

on property:sys.backlight_on=1 && property:sys.touch_id=7
    write /sys/bus/platform/devices/synaptics_tcm.0/synaptics_tcm/irq_en 1
on property:sys.backlight_on=1 && property:sys.touch_id=8
    write /sys/bus/platform/devices/synaptics_tcm.0/synaptics_tcm/irq_en 1

service touchbacklightd /system/vendor/bin/hw/touchbacklightd
    disabled
    user system
    group system
    writepid /dev/cpuset/system-background/tasks
